<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>C++ Debugging Exercise</title>
    <style>
      * { box-sizing: border-box; margin: auto }
      body { width: 1000px;  }
      h1 { padding: 0; margin: 0; }
      header { width: auto; margin-top: 20px; padding-bottom: 10px; }
      .row { display: table; margin-bottom: 10px; padding-bottom: 10px;
             border-bottom: 1px solid grey; width: 1000px }
      .row section { float: left; height: auto }
      .row nav { float: left; height: auto }
      /* navigation */
      nav { width: 40%; padding-left: 10px; }
      nav a { display: block; color: #333; padding-bottom: 5px; }
      nav a.active {color: black; font-weight: bold; }
      /* instructions */
      section#instruction { width: 60%; }
      section h1 { font-size: 15pt; margin-bottom: 10px }
      /*  */
      .button { display: block; margin-top: 10px; border: 1px solid black; }
      .button:disabled { border-color: grey; }
      #student-input { width: 40%; }
      #student-input textarea { width: 90%; height: 100px; display: block }
      /*  */
      #student-responses { width: 60%; }
      #student-responses div { padding: 5px; border: 1px solid #666;
                               margin-bottom: 5px; border-radius: 12px; }
      /* tabs (inspired by https://codepen.io/oknoblich/pen/tfjFl) */
      .tabs input { display: none; }
      .tabs label { display: inline-block; padding: 7px 25px;
                    text-align: center; color: #abc;
                    border: 1px solid transparent; }
      .tabs label:hover { color: #789; cursor: pointer; }
      .tabs input:checked + label { color: #0af; border: 1px solid #abc;
                                    border-top: 2px solid #0af;
                                    border-bottom: 1px solid #fff }
      .tabs div.content { border-top: 1px solid #abc; margin-top: -1px; }
      /* compiler/program output */
      div.output { height: 250px; padding: 5px; padding-left: 15px;
                   background: black; color: white;
                   font-family: monospace; font-size: 12pt; }
    </style>
    <!-- codemirror -->
    <script src="ext/codemirror-5.45.0/lib/codemirror.js"></script>
    <link rel="stylesheet" href="ext/codemirror-5.45.0/lib/codemirror.css" />
    <script src="ext/codemirror-5.45.0/mode/clike/clike.js"></script>
  </head>
  <body>
    <header>
      <h1>Part Name</h1>
    </header>
    <div class="row">
    <nav>
      <a class="active" href="#">A) What should the program do?</a>
      <a href="#">B) What are potential bugs?</a>
      <a href="#">C) Waht would you do to debug?</a>
      <a href="#">D) Run the program</a>
      <a href="#">E) Trey Debug Technique 1</a>
      <a href="#">F) Fix Program</a>
    </nav>
    <section id="instruction">
      <h1>Instructions</h1>
      Please take a moment to read through the source code of the program
      provided below. What do you think is the program <b>intended</b> to do?
      Put your thoughts into the text box below.
    </section>
    </div>
    <div class="row">
      <section id="student-input">
      <h1>What do you think the program output will be?</h1>
      <form action="#">
        <textarea>Enter your idea here....</textarea>
        <input class="button" type="submit" value="Submit" />
      </form>
      </section>
      <section id="student-responses">
      <h1>Other students' responses:</h1>
      <div>"It should do ..."</div>
      <div>"The program will print out ..."</div>
      <div>"I expect to see ..."</div>
      <form action="#">
        <input class="button" type="submit" value="Next" disabled="true" />
      </form>
      </section>
    </div>

    <div class="row tabs">
      <input id="tab1" type="radio" name="tabs" checked="true" onchange="tab(this)"/>
      <label for="tab1">main.c</label>
      <input id="tab2" type="radio" name="tabs" onchange="tab(this)"/>
      <label for="tab2">Makefile</label>
      <div id="content1" class="content">
        <textarea id="c-code">/* demo code */int x = 10; void test(int a) { a = 10; }</textarea>
      </div>
      <div id="content2" class="content">
        <textarea id="makefile">test: test.c</textarea>
      </div>
    </div>

    <div class="row tabs">
      <input id="tab3" type="radio" name="tabs" checked="true" onchange="tab(this)"/>
      <label for="tab3">Compiler Output</label>
      <input id="tab4" type="radio" name="tabs" onchange="tab(this)"/>
      <label for="tab4">Program Output</label>
      <div id="content3" class="content">
        <div id="compiler-out" class="output">compiling stuff...</div>
      </div>
      <div id="content4" class="content">
        <div id="program-out" class="output">hello world.....</div>
      </div>
    </div>


  <!-- checkout https://codemirror.net/mode/clike/ -->
  <script>
    var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("c-code"), {
      mode:  "text/x-c++src",
      lineNumbers: true,
      matchBrackets: true
    });
    var mac = CodeMirror.keyMap.default == CodeMirror.keyMap.macDefault;
    CodeMirror.keyMap.default[(mac ? "Cmd" : "Ctrl") + "-Space"] = "autocomplete";
    var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("makefile"), {
      mode:  "text/x-cmake",
      lineNumbers: true,
      matchBrackets: true
    });

    // tab switch function
    function tab(el) {
      var name = "content" + el.id.slice(-1)
      el.parentElement.childNodes.forEach(function(node){
        if(node.tagName == "DIV") {
          if(node.id == name) { node.style.display = "block"; }
          else { node.style.display = "none"; }
        }
      });
    }
    // hide all tabs
    document.querySelectorAll(".tabs div.content").forEach(function(node) {
      node.style.display = "none";
    });
    // display main
    tab(document.getElementById("tab1"));
    tab(document.getElementById("tab3"));

  </script>
  </body>
</html>
